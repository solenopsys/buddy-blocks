# FastBlock Tests

Набор тестов для проверки функциональности и производительности блочного хранилища FastBlock.

## Требования

```bash
pip install requests
```

## Тесты

### test_basic_operations.py

Базовый функциональный тест для проверки корректности работы основных операций:

- **PUT** - сохранение блока данных (4KB)
- **GET** - получение блока по хешу
- **DELETE** - удаление блока
- Проверка хеша SHA256
- Проверка целостности данных
- Проверка статуса 404 после удаления

**Использование:**
```bash
./test_basic_operations.py
```

### benchmark_sequential.py

Последовательный бенчмарк для измерения производительности:

- Генерирует 1000 уникальных блоков по 4KB
- Последовательно записывает все блоки (PUT)
- Последовательно читает все блоки (GET)
- Последовательно удаляет все блоки (DELETE)
- Выводит метрики:
  - Скорость записи (blocks/sec, MB/s)
  - Скорость чтения (blocks/sec, MB/s)
  - Скорость удаления (blocks/sec)

**Использование:**
```bash
./benchmark_sequential.py
```

### load_test_concurrent.py

Нагрузочный тест для проверки работы под нагрузкой:

- Создает 1000 блоков большого размера (64KB каждый)
- Для каждого блока выполняет:
  - Запись (PUT)
  - Немедленное чтение (GET)
  - Проверка хеша и целостности данных
- После завершения удаляет все созданные блоки
- Выводит метрики:
  - Среднее время записи/чтения
  - RPS (requests per second) для записи/чтения

**Использование:**
```bash
./load_test_concurrent.py
```

## Настройка

Все тесты используют следующие параметры по умолчанию:

```python
SERVER_URL = "http://localhost:10001"
```

Для изменения адреса сервера отредактируйте соответствующую константу в файле теста.

## Примечания

- Перед запуском тестов убедитесь, что сервер FastBlock запущен
- Для корректной работы требуется доступ к `/tmp/fastblock.data` и `/tmp/fastblock_meta.db`
- Тесты автоматически очищают созданные данные после завершения
