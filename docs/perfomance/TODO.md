- [сейчас] 1. использовать блоки из кеша а не куча костылей с повторным выделением

- [] 2. одна общая транзакция на цикл контроллера
- [] 3. неблокирующая отправка ответов uring 
- [] 4. устаранить копирование данные в put 



## Устранить двойное выделение блоков (allocate + occupy)

сейчас алгоритм работает через задницу а должен просто при входящем запросе брать из пула свободный блок и писуть туда как стрим а вконце уже 
закреплять блок хешем то есть присовить

**Файл:** `src/controller/handler.zig:31-69`, `src/worker/worker.zig:259-347`

**Проблема:**
- Worker запрашивает `allocate_block` для пополнения пула (с временным хешом)
- При реальном PUT worker отправляет `occupy_block` (с настоящим хешом)
- Контроллер вызывает `BuddyAllocator.allocate()` **дважды** → двойная транзакция LMDB
- Резервные блоки остаются занятыми фиктивными хешами → утечка памяти + рост БД

**Решение:**
 Довести prefetch до конца:
  - Worker использует `acquire()` из пула для получения заранее выделенного блока
  - Контроллер в `handleOccupy` обновляет хеш БЕЗ повторного `allocate()`
 

  

---